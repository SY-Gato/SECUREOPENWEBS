<!DOCTYPE html>
<html>
  <head>
    <title>Yes</title>
  </head>
  <body>
    <button onclick="doit()">Get Headers</button>
    <p id="v"></p>
    <script>
      /*function doit() {
        alert("clicked!");
        let element = document.getElementById("v");
        fetch(document.location, { method: 'HEAD' })
          .then(response => {
            if (response.ok) {
              return response.headers;
            } else {
              throw new Error('Network response was not ok.');
            }
          }
          .then(headers => { {
            alert(headers);
            element.textContent = headers.toString();
          }
          .catch(error => {
              alert('Error fetching headers:', error);
          })));
       alert("done!");
        }*/
      
  /*function doit() {
    alert("clicked!");
    let element = document.getElementById("v");
    fetch(document.location, { method: 'HEAD' })
        .then(response => {
            if (response.ok) {
                return response.headers;
            } else {
                throw new Error('Network response was not ok.');
            }
        })
        .then(headers => {
            alert(headers);
            element.textContent = headers.toString();
        })
        .catch(error => {
            alert('Error fetching headers: ' + error); // Concatenate error message properly
        });
    alert("done!");
}*/
function doit() {
    alert("clicked!");
    let element = document.getElementById("v");
    fetch(document.location, { method: 'HEAD' })
        .then(response => {
            if (response.ok) {
                return response.headers;
            } else {
                throw new Error('Network response was not ok.');
            }
        })
        .then(headers => {
            let headersString = '';
            for (let pair of headers.entries()) {
                headersString += pair[0] + ': ' + pair[1] + '\n';
            }
            alert(headersString);
            element.textContent = headersString;
        })
        .catch(error => {
            alert('Error fetching headers: ' + error);
        });
    alert("done!");
}


    </script>
  </body>
</html>
